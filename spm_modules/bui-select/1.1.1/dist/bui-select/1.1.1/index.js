define("bui-select/1.1.1/index",["bui-common/1.1.0/common","jquery","bui-picker/1.1.2/index","bui-overlay/1.1.0/index","bui-list/1.1.1/index","bui-data/1.1.0/index"],function(e,t,i){var n=e("bui-common/1.1.0/common"),a=n.namespace("Select");n.mix(a,{Select:e("bui-select/1.1.1/src/select"),Combox:e("bui-select/1.1.1/src/combox"),Suggest:e("bui-select/1.1.1/src/suggest")}),i.exports=a}),define("bui-select/1.1.1/src/select",["jquery","bui-common/1.1.0/common","bui-picker/1.1.2/index","bui-overlay/1.1.0/index","bui-list/1.1.1/index","bui-data/1.1.0/index"],function(e,t,i){"use strict";function n(e){if(a.isPlainObject(e)){var t=[];return u.each(e,function(e,i){t.push({value:i,text:e})}),t}var i=[];return u.each(e,function(e){i.push(u.isString(e)?{value:e,text:e}:e)}),i}var a=e("jquery"),u=e("bui-common/1.1.0/common"),r=e("bui-picker/1.1.2/index").ListPicker,s=u.prefix,l=u.Component,c=r,o=s+"select-input",g=l.Controller.extend({initializer:function(){var e,t,i=this,a=i.get("multipleSelect"),r=i.get("picker");r?i.get("valueField")&&r.set("valueField",i.get("valueField")):(e=a?"listbox":"simple-list",t=i.get("list")||{},t=u.mix(t,{xclass:e,elCls:s+"select-list",store:i.get("store"),items:n(i.get("items"))}),r=new c({children:[t],valueField:i.get("valueField")}),i.set("picker",r)),a&&r.set("hideEvent","")},renderUI:function(){var e=this,t=e.get("picker"),i=e._getTextEl();t.set("trigger",e.getTrigger()),t.set("triggerEvent",e.get("triggerEvent")),t.set("autoSetValue",e.get("autoSetValue")),t.set("textField",i),t.render(),e.set("list",t.get("list"))},bindUI:function(){{var e=this,t=e.get("picker"),i=t.get("list");i.get("store")}t.on("selectedchange",function(t){t.item&&e.fire("change",{text:t.text,value:t.value,item:t.item})}),e.get("autoSetValue")&&i.on("itemsshow",function(){e._syncValue()}),t.on("show",function(){e.get("forceFit")&&t.set("width",e.get("el").outerWidth())})},containsElement:function(e){var t=this,i=t.get("picker");return l.Controller.prototype.containsElement.call(this,e)||i.containsElement(e)},getTrigger:function(){return this.get("el")},_uiSetItems:function(e){if(e){var t=this,i=t.get("picker"),a=i.get("list");a.set("items",n(e)),t._syncValue()}},_syncValue:function(){var e=this,t=e.get("picker"),i=e.get("valueField");i&&t.setSelectedValue(a(i).val())},_uiSetName:function(e){var t=this,i=t._getTextEl();e&&i.attr("name",e)},_uiSetWidth:function(e){var t=this;if(null!=e){if(t.get("inputForceFit")){var i=t._getTextEl(),n=t.get("el").find(".x-icon"),a=i.outerWidth()-i.width(),u=e-n.outerWidth()-a;i.width(u)}if(t.get("forceFit")){var r=t.get("picker");r.set("width",e)}}},_uiSetDisabled:function(e){var t=this,i=t.get("picker"),n=t._getTextEl();i.set("disabled",e),n&&n.attr("disabled",e)},_getTextEl:function(){var e=this,t=e.get("el");return t.is("input")?t:t.find("input")},destructor:function(){var e=this,t=e.get("picker");t&&t.destroy()},_getList:function(){var e=this,t=e.get("picker"),i=t.get("list");return i},getSelectedValue:function(){return this.get("picker").getSelectedValue()},setSelectedValue:function(e){var t=this,i=t.get("picker");i.setSelectedValue(e)},getSelectedText:function(){return this.get("picker").getSelectedText()}},{ATTRS:{picker:{},list:{},valueField:{},store:{},focusable:{value:!0},autoSetValue:{value:!0},multipleSelect:{value:!1},inputForceFit:{value:!0},name:{},items:{sync:!1},inputCls:{value:o},forceFit:{value:!0},events:{value:{change:!1}},tpl:{view:!0,value:'<input type="text" readonly="readonly" class="'+o+'"/><span class="x-icon x-icon-normal"><i class="icon icon-caret icon-caret-down"></i></span>'},triggerEvent:{value:"click"}}},{xclass:"select"});i.exports=g}),define("bui-select/1.1.1/src/combox",["jquery","bui-common/1.1.0/common","bui-picker/1.1.2/index","bui-overlay/1.1.0/index","bui-list/1.1.1/index","bui-data/1.1.0/index"],function(e,t,i){var n=e("jquery"),a=e("bui-common/1.1.0/common"),u=e("bui-select/1.1.1/src/select"),r=e("bui-select/1.1.1/src/tag"),s=a.prefix+"combox-input",l=u.extend([r],{renderUI:function(){var e=this,t=e.get("picker");t.set("autoFocused",!1)},_uiSetItems:function(e){for(var t=this,i=0;i<e.length;i++){var n=e[i];a.isString(n)&&(e[i]={value:n,text:n})}l.superclass._uiSetItems.call(t,e)},bindUI:function(){var e=this,t=e.get("picker"),i=t.get("list"),a=t.get("textField");n(a).on("keyup",function(){var e=i.getSelected();e&&i.clearItemStatus(e)}),t.on("show",function(){i.clearSelected()})},_uiSetValueField:function(){},getTrigger:function(){return this._getTextEl()}},{ATTRS:{tpl:{view:!0,value:'<input type="text" class="'+s+'"/>'},inputCls:{value:s},autoSetValue:{value:!1}}},{xclass:"combox"});i.exports=l}),define("bui-select/1.1.1/src/tag",["jquery","bui-common/1.1.0/common","bui-list/1.1.1/index","bui-data/1.1.0/index"],function(e,t,i){function n(e){var t="";return 0==e.length?"":(t=e.replace(/>/g,"&gt;"),t=t.replace(/</g,"&lt;"))}var a=e("jquery"),u=e("bui-common/1.1.0/common"),r=e("bui-list/1.1.1/index"),s=u.KeyCode,l="warn",c=function(){};c.ATTRS={showTag:{value:!1},tagItemTpl:{value:"<li>{text}<button>\xd7</button></li>"},tagList:{value:null},limit:{value:null},forbitInput:{value:!1},tagPlaceholder:{value:"\u8f93\u5165\u6807\u7b7e"},tagFormatter:{value:null},separator:{value:";"}},u.augment(c,{__renderUI:function(){var e=this,t=e.get("showTag"),i=e.get("tagPlaceholder"),n=e.getTagInput();t&&!n.attr("placeholder")&&(n.attr("placeholder",i),e.set("inputForceFit",!1))},__bindUI:function(){function e(){var e=t.get("tagList"),i=e.getLastItem();i&&e.hasStatus(i,l)&&e.setItemStatus(i,l,!1);var a=n.val();a&&t._addTag(a)}var t=this,i=t.get("showTag"),n=t.getTagInput();if(i){n.on("keydown",function(e){if(!n.val()){var i=t.get("tagList"),a=i.getLastItem(),u=t.get("picker");e.which==s.DELETE||e.which==s.BACKSPACE?(i.hasStatus(a,l)?t._delTag(a):i.setItemStatus(a,l,!0),u.hide()):i.setItemStatus(a,l,!1)}});var a;t.get("forbitInput")||n.on("change",function(){a=setTimeout(function(){e(),a=null},50)}),t.on("change",function(){setTimeout(function(){a&&clearTimeout(a),e()})})}},__syncUI:function(){var e=this,t=e.get("showTag"),i=e.get("valueField");t&&i&&e._setTags(a(i).val())},_setTags:function(e){var t=this,i=t.get("tagList"),n=t.get("separator"),a=t.get("tagFormatter"),r=e.split(n);i||(i=t._initTagList()),e&&u.each(r,function(e){var t=e;a&&(t=a(t)),i.addItem({value:e,text:t})})},_addTag:function(e){e=n(e);var t=this,i=t.get("tagList"),a=t.getTagInput(),u=t.get("limit"),r=t.get("tagFormatter"),s=i.getItem(e);if(!(u&&i.getItemCount()>=u)){if(s)t._blurItem(i,s);else{var l=e;r&&(l=r(l)),i.addItem({value:e,text:l}),t._synTagsValue()}a.val("")}},_blurItem:function(e,t){e.setItemStatus(t,"active",!0),setTimeout(function(){e.setItemStatus(t,"active",!1)},400)},_delTag:function(e){var t=this,i=t.get("tagList");i.removeItem(e),t._synTagsValue()},getTagsValue:function(){var e=this,t=e.get("tagList"),i=t.getItems(),n=[];return u.each(i,function(e){n.push(e.value)}),n.join(e.get("separator"))},_initTagList:function(){var e=this,t=e.getTagInput(),i=new r.SimpleList({elBefore:t,itemTpl:e.get("tagItemTpl"),idField:"value"});return i.render(),e._initTagEvent(i),e.set("tagList",i),i},_initTagEvent:function(e){var t=this;e.on("itemclick",function(e){var i=a(e.domTarget);i.is("button")&&t._delTag(e.item)})},getTagInput:function(){var e=this,t=e.get("el");return t.is("input")?t:t.find("input")},_synTagsValue:function(){var e=this,t=e.get("valueField");t&&a(t).val(e.getTagsValue())}}),i.exports=c}),define("bui-select/1.1.1/src/suggest",["jquery","bui-common/1.1.0/common","bui-picker/1.1.2/index","bui-overlay/1.1.0/index","bui-list/1.1.1/index","bui-data/1.1.0/index"],function(e,t,i){"use strict";var n=e("jquery"),a=e("bui-common/1.1.0/common"),u=e("bui-select/1.1.1/src/combox"),r=200,s="",l=u.extend({bindUI:function(){var e=this,t=e.get("el").find("input"),i="keyup"===e.get("triggerEvent")?"keyup":"keyup click";t.on(i,function(){e._start()})},_start:function(){var e=this;e._timer=e.later(function(){e._updateContent()},r)},_updateContent:function(){var e,t=this,i=t.get("data"),n=t.get("el").find("input");if((i||n.val()!==t.get("query"))&&(t.set("query",n.val()),e=n.val(),i||e)){var a=t.get("cacheable"),u=t.get("store"),r=t.get("url"),s=t.get("data");if(a&&(r||u)){var l=t.get("dataCache");void 0!==l[e]?t._handleResponse(l[e]):t._requestData()}else r||u?t._requestData():s&&t._handleResponse(s,!0)}},_getStore:function(){var e=this,t=e.get("picker"),i=t.get("list");return i?i.get("store"):void 0},_requestData:function(){var e=this,t=e.get("el").find("input"),i=e.get("callback"),a=e.get("store"),u={};u[t.attr("name")]=t.val(),a?(u.start=0,a.load(u,i)):n.ajax({url:e.get("url"),type:"post",dataType:e.get("dataType"),data:u,success:function(t){e._handleResponse(t),i&&i(t)}})},_handleResponse:function(e,t){var i=this,n=t?i._getFilterItems(e):e;i.set("items",n),i.get("cacheable")&&(i.get("dataCache")[i.get("query")]=n)},_getItemText:function(e){var t=this,i=t.get("picker"),n=i.get("list");return n?n.getItemText(e):""},_getFilterItems:function(e){function t(e,t){u.push(a.isString(t)?e:t)}var i=this,u=[],r=i.get("el").find("input"),s=r.val(),l=i.get("data");return e=e||[],a.each(e,function(e){var u=a.isString(e)?e:i._getItemText(e);l?-1!==u.indexOf(n.trim(s))&&t(u,e):t(u,e)}),u},later:function(e,t,i){t=t||0;var n=i?setInterval(e,t):setTimeout(e,t);return{id:n,interval:i,cancel:function(){this.interval?clearInterval(n):clearTimeout(n)}}}},{ATTRS:{data:{value:null},query:{value:s},cacheable:{value:!1},dataCache:{shared:!1,value:{}},dataType:{value:"jsonp"},url:{},callback:{},triggerEvent:{valueFn:function(){return this.get("data")?"click":"keyup"}},autoSetValue:{value:!1}}},{xclass:"suggest"});i.exports=l});